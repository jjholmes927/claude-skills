# Guideline Refresher - Usage Examples

This document shows real-world examples of using the guideline-refresher skill to automatically update coding guidelines based on your codebase evolution.

## What This Skill Does

Given an area of your codebase, the guideline-refresher will:
- ðŸ“œ **Analyze git commit history** to see what patterns have been adopted
- âœ… **Review merged PRs** to understand what code has been approved
- ðŸ’¬ **Mine PR review comments** to extract what your team cares about
- ðŸ“Š **Generate evidence-based guidelines** reflecting actual practices

This keeps your Claude Code rules easily reflecting the direction you're going across different areas of your codebase, maintaining quality at the same level you're already enforcing in code reviews!

---

## Example 1: Frontend Component Guidelines After React Migration

### Scenario
Your team migrated from Vue to React 3 months ago. Your `.claude` rules still mention Vue patterns. You want guidelines that reflect your current React practices.

### Command
```bash
./skills/guideline-refresher/refresh.sh --area frontend/components --depth standard
```

### Output
```
ðŸ” Guideline Refresher
   Area: frontend/components
   Depth: standard
   Repo: /Users/you/project

  Analyzing last 90 days of git history...
    Found 127 commits
  Analyzing up to 50 merged PRs...
    Found 34 PRs touching frontend/components
    Top review themes: type_safety (23), testing (18), code_organization (15)
  Analyzing file patterns in frontend/components...
    Found 87 files
    Dominant naming: PascalCase (72 files)

â†’ Generating updated guidelines...
â†’ Saving guidelines...
  Backed up previous version to: frontend_components.20250105_143022.md.bak
âœ“ Guidelines saved to: .claude/guidelines/frontend_components.md
â†’ Generating report...
âœ“ Report saved to: .claude/reports/guideline-refresh-20250105_143022.md

âœ… Guideline refresh complete!

ðŸ“„ Guidelines: .claude/guidelines/frontend_components.md
ðŸ“Š Report: .claude/reports/guideline-refresh-20250105_143022.md
```

### Generated Guidelines Preview
```markdown
# Coding Guidelines: frontend/components

**Last Updated:** 2025-01-05 14:30
**Auto-generated by:** Guideline Refresher Skill

## Analysis Summary
- **Total commits analyzed:** 127
- **Relevant PRs reviewed:** 34
- **Files in area:** 87

## Technology Focus
Based on commit message analysis:
- **React**: 47 commits
- **Typescript**: 45 commits
- **Testing**: 32 commits
- **Performance**: 18 commits

## File Organization
**Primary file types:**
- `.tsx`: 72 files (82.8%)
- `.ts`: 12 files (13.8%)
- `.test.tsx`: 3 files (3.4%)

## Naming Conventions
**Observed naming patterns:**
- **PascalCase**: 72 files (83.7%)
- **camelCase**: 11 files (12.8%)
- **kebab-case**: 3 files (3.5%)

**Recommendation:** Follow `PascalCase` pattern (dominant in 72 files)

## Code Review Focus Areas
Based on recurring themes in PR reviews:

### Type Safety (23 mentions)
Example feedback: "Please add proper TypeScript interfaces for props. Avoid using
`any` type as it defeats the purpose of TypeScript..."

### Testing (18 mentions)
Example feedback: "Can you add tests for the error handling path? We should ensure
all user-facing components have test coverage..."

### Code Organization (15 mentions)
Example feedback: "Consider extracting this logic into a custom hook. It would make
the component more readable and the logic reusable..."

## Recent Evolution
**Recent refactoring themes:**

**TypeScript Migration** (12 commits):
- Migrate UserProfile to TypeScript with strict types
- Convert dashboard components to .tsx
- Add proper interface definitions for all props

**Component Refactoring** (8 commits):
- Refactor form components to use React Hook Form
- Update button component to support new design system
- Modernize modal component with React 18 patterns

## Recommendations
1. **Strong TypeScript usage detected.** Enforce strict type checking and avoid `any`
   types. Consider enabling `strictNullChecks` and `noImplicitAny` in tsconfig.json.

2. **Testing is a priority.** Ensure all new code includes tests. PR reviews
   frequently mention testing - make it a first-class concern.

3. **React patterns are dominant.** Use functional components with hooks. Avoid class
   components for new code. Follow React best practices for state management.
```

---

## Example 2: Backend API Standardization

### Scenario
Your backend team has been evolving API patterns organically. You want to document what "good" actually looks like based on approved code.

### Command
```bash
./skills/guideline-refresher/refresh.sh --area backend/api --depth deep
```

### Output
```
ðŸ” Guideline Refresher
   Area: backend/api
   Depth: deep
   Repo: /Users/you/project

  Analyzing last 180 days of git history...
    Found 203 commits
  Analyzing up to 100 merged PRs...
    Found 67 PRs touching backend/api
    Top review themes: error_handling (31), type_safety (28), testing (22)
  Analyzing file patterns in backend/api...
    Found 124 files
    Dominant naming: snake_case (89 files)

â†’ Generating updated guidelines...
â†’ Saving guidelines...
âœ“ Guidelines saved to: .claude/guidelines/backend_api.md
â†’ Generating report...
âœ“ Report saved to: .claude/reports/guideline-refresh-20250105_150842.md

âœ… Guideline refresh complete!
```

### Key Findings from Report
```markdown
## Key Findings

### PR Review Themes
Most frequently mentioned topics in code reviews:
- **Error Handling**: 31 mentions
- **Type Safety**: 28 mentions
- **Testing**: 22 mentions
- **Performance**: 15 mentions
- **Documentation**: 12 mentions

### Sample Review Feedback

#### Error Handling
> "We should return proper HTTP status codes here. 404 for not found, 400 for
> validation errors, 500 for server errors. Also, include error details in the
> response body..."

> "Missing error handling for the database connection. What happens if the query
> fails? We need to catch and log this properly..."

#### Type Safety
> "Please add proper type hints for all function parameters and return values.
> This makes the API contract clearer and helps with IDE autocomplete..."

### Recent Refactoring Activity
Found 45 refactoring-related commits:
- Standardize error responses across all endpoints
- Add input validation using Pydantic models
- Implement consistent logging for all API routes
- Refactor authentication middleware for better reusability
- Update API versioning strategy to use URL prefixes
```

---

## Example 3: Quick Sprint Review

### Scenario
Your team just finished a 2-week sprint. You want to quickly check if any patterns changed in your utilities folder.

### Command
```bash
./skills/guideline-refresher/refresh.sh --area utils --depth quick
```

### Output
```
ðŸ” Guideline Refresher
   Area: utils
   Depth: quick
   Repo: /Users/you/project

  Analyzing last 30 days of git history...
    Found 23 commits
  Analyzing up to 20 merged PRs...
    Found 8 PRs touching utils
    Top review themes: testing (5), naming (4), documentation (3)
  Analyzing file patterns in utils...
    Found 34 files
    Dominant naming: camelCase (28 files)

â†’ Generating updated guidelines...
â†’ Saving guidelines...
âœ“ Guidelines saved to: .claude/guidelines/utils.md
â†’ Generating report...
âœ“ Report saved to: .claude/reports/guideline-refresh-20250105_161533.md

âœ… Guideline refresh complete!
```

### Changes Detected
```markdown
## Changes from Previous Guidelines

**New sections:**
- Recent Evolution
- Testing Requirements

**Updated sections:** 3 sections refined based on recent activity

**Data freshness:** Analyzed 23 recent commits (previous: 18)

### What Changed?
- Added testing requirements based on 5 PR review comments
- Updated naming conventions (camelCase now 82% vs previous 71%)
- New focus on JSDoc documentation (3 review mentions)
```

---

## Example 4: Using from Claude Code

### Scenario
You're chatting with Claude Code and want to refresh guidelines naturally.

### Conversation
```
You: "Our frontend patterns have evolved a lot. Can you refresh the component
      guidelines based on our recent changes?"

Claude: "I'll use the guideline-refresher skill to analyze your frontend/components
         area and update guidelines based on recent commits and PR reviews."

[Runs: python3 skills/guideline-refresher/refresh_guidelines.py
       --area frontend/components --depth standard]

Claude: "âœ… I've refreshed your frontend component guidelines!

Key findings:
- 127 commits analyzed from the last 90 days
- 34 relevant PRs reviewed
- Strong TypeScript adoption (45 commits)
- Testing is a top priority (mentioned in 18 PR reviews)
- PascalCase naming is now standard (72/87 files)

The guidelines now reflect:
1. React hooks patterns (replacing old class components)
2. Strict TypeScript usage
3. Testing requirements for all components
4. Performance optimization patterns

I've also noticed your team frequently discusses error handling in reviews.
Would you like me to add specific error boundary examples to the guidelines?"

You: "Yes please, and can you add examples of our new React Hook Form pattern?"

Claude: "Let me enhance the guidelines with those examples..."

[Adds code examples to the generated guidelines]
```

---

## Example 5: CI/CD Integration

### Scenario
You want guidelines to refresh automatically every week via GitHub Actions.

### Workflow Setup
```yaml
# .github/workflows/refresh-guidelines.yml
name: Refresh Guidelines
on:
  schedule:
    - cron: '0 0 * * 0'  # Every Sunday at midnight
  workflow_dispatch:

jobs:
  refresh:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Refresh Frontend Guidelines
        run: |
          python3 skills/guideline-refresher/refresh_guidelines.py \
            --area frontend/components \
            --depth standard

      - name: Create PR
        uses: peter-evans/create-pull-request@v5
        with:
          title: "docs: auto-refresh coding guidelines"
          body: |
            Automated guidelines refresh based on recent code changes.

            Please review and merge if the updates look accurate.
```

### Weekly PR Output
```markdown
## Auto-refresh: Frontend Component Guidelines

**Changes detected:**
- 47 new commits since last refresh
- 12 merged PRs with relevant changes
- Testing emphasis increased (5 new review comments)
- New performance patterns adopted (lazy loading, memoization)

**Updated sections:**
- Code Review Focus Areas
- Recent Evolution
- Recommendations

**Files changed:**
- .claude/guidelines/frontend_components.md
- .claude/reports/guideline-refresh-20250105_000042.md
```

---

## Example 6: Area-Specific Configuration

### Scenario
Your authentication code has special requirements. You want to track security-specific patterns.

### Setup
Create `.claude/area-configs/backend-auth.json`:
```json
{
  "patterns_to_track": [
    "authentication",
    "authorization",
    "security",
    "token validation",
    "password hashing"
  ],
  "required_sections": [
    "Security Practices",
    "Token Management",
    "Error Handling"
  ],
  "reviewers_to_weight": {
    "security-lead": 3.0,
    "backend-lead": 2.0
  }
}
```

### Command
```bash
./skills/guideline-refresher/refresh.sh --area backend/auth --depth deep
```

### Generated Guidelines Include
```markdown
## Security Practices

Based on 23 security-related commits and 15 review comments:

### Authentication
- Use bcrypt for password hashing (minimum 12 rounds)
- Implement rate limiting on login endpoints
- JWT tokens should expire in 1 hour, refresh tokens in 7 days

### Authorization
- Validate tokens on every protected endpoint
- Use role-based access control (RBAC)
- Never trust client-side permission checks

### Token Management
- Store refresh tokens in httpOnly cookies
- Implement token rotation on refresh
- Blacklist tokens on logout
```

---

## Tips for Best Results

### 1. Choose the Right Depth
- **quick** (30 days): After sprints, minor updates
- **standard** (90 days): Regular quarterly refreshes
- **deep** (180 days): After major migrations or refactors

### 2. Be Specific with Areas
âœ… Good:
```bash
--area frontend/components
--area backend/api/services
--area utils/validation
```

âŒ Too broad:
```bash
--area src
--area .
```

### 3. Enhance Generated Guidelines
Always add code examples to make guidelines concrete:

```markdown
## Component Structure

**Pattern:** Functional components with hooks

### Example
\`\`\`typescript
// Good: Proper TypeScript, hooks, clean structure
interface UserCardProps {
  user: User;
  onEdit: (user: User) => void;
}

export function UserCard({ user, onEdit }: UserCardProps) {
  const [isEditing, setIsEditing] = useState(false);

  // Implementation
}
\`\`\`
```

### 4. Review Before Committing
Generated guidelines are evidence-based but need your context:
- Add code examples
- Link to architecture docs
- Note exceptions to the rules
- Explain the "why" behind patterns

---

## Real Output Files

### Guidelines File
Location: `.claude/guidelines/frontend_components.md`

This becomes your source of truth for Claude Code when working in that area.

### Report File
Location: `.claude/reports/guideline-refresh-20250105_143022.md`

Contains detailed metrics, sample feedback, and analysis rationale.

### Backup Files
Location: `.claude/guidelines/frontend_components.20250105_143022.md.bak`

Previous versions are automatically backed up - you can always revert.

---

## Common Workflows

### Weekly Maintenance
```bash
# Quick refresh of active areas
./skills/guideline-refresher/refresh.sh --area frontend/components --depth quick
./skills/guideline-refresher/refresh.sh --area backend/api --depth quick
```

### Post-Migration
```bash
# Deep analysis after major changes
./skills/guideline-refresher/refresh.sh --area frontend --depth deep
```

### New Team Member Onboarding
```bash
# Generate current guidelines for all areas
for area in frontend/components backend/api utils; do
  ./skills/guideline-refresher/refresh.sh --area "$area" --depth standard
done
```

---

## Installation

To use these examples yourself:

```bash
# Add from marketplace
/plugin marketplace add jjholmes927/jjholmes927-claude-skills

# Install the plugin
/plugin install

# Select jjholmes927-claude-skills from marketplace
# Select guideline-refresher

# Or install manually
git clone https://github.com/jjholmes927/jjholmes927-claude-skills.git
cd jjholmes927-claude-skills
./install.sh guideline-refresher
```

Then run on your own codebase:
```bash
~/.claude/skills/guideline-refresher/refresh.sh --area your/area --depth standard
```

---

**Questions or issues?** See [README.md](skills/guideline-refresher/README.md) for full documentation.
